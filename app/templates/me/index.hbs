{{ title 'Settings' }}

<div id='crates-heading'>
    {{svg-jar "gear"}}
    <h1>Account Settings</h1>
</div>

<div id='me-profile'>
    <h2>Profile Information</h2>

    <div class='info'>
        {{#user-link user=model.user }} {{user-avatar user=model.user size='medium'}} {{/user-link}}

        <dl>
            <dt>Name</dt>
            <dd>{{ model.user.name }}</dd>
            <dt>GitHub Account</dt>
            <dd>{{ model.user.login }}</dd>
            <dt>Email</dt>

            {{#if isEditing }}
                {{input value=userEmail type="text" placeholder="Email" enter="saveEmail"}}
                <p>Please add your email address. We need this in order to contact you
                just in case anything goes wrong. We promise we'll never share it!</p>
                <button class='small yellow-button' {{action "saveEmail"}}>Save</button>
                <button class='small yellow-button' {{action "cancelEdit"}}>Cancel</button>
            {{else}}
                <dd>{{ model.user.email }}</dd>
                <button class='small yellow-button' {{action "editEmail"}}>Edit</button>
            {{/if}}
        </dl>
    </div>
</div>

<div id='me-api'>
    <div class='me-subheading'>
        <h2>API Access</h2>
        <div class='right'>
            <button class='yellow-button' disabled={{disableCreate}} {{action "startNewToken"}}>New Token</button>
        </div>
    </div>

    <p>
        If you want to use package commands from the command line, you'll need a
        <code>~/.cargo/credentials</code>, the first step to creating this
        is to generate a new token using the button above.
    </p>

    <div id='tokens'>
        {{#each sortedTokens as |api_token|}}
            {{api-token-row api_token=api_token}}
        {{/each}}
    </div>
</div>
